define("scalejs.grid-slick/observableDataview",["scalejs!core","knockout","slick.grid"],function(e,t,n){var i=t.isObservable,r=t.computed,o=e.object.has;return function(e){function t(){return i(e.itemsCount)?e.itemsCount():e.itemsSource().length}function a(){return p}function l(e){return p?p[e]:null}function s(e){var t=p[e];return t?t.metadata:null}function u(){var t=0;i(e.itemsCount)?e.itemsCount.subscribe(function(e){f.notify({previous:t,current:e},null,null),t=e}):r({read:function(){var n=e.itemsSource()||[],i=n.length;i!==t&&(f.notify({previous:t,current:i},null,null),t=i)}})}function c(){r({read:function(){var t,n,i,r=e.itemsSource()||[],a=[];r=r.filter(function(e){return o(e)}),t=Object.keys(p).map(function(e){return parseInt(e,10)}),n=r.map(function(e){return e.index}),i=t.except(n).toArray(),i.forEach(function(e){delete p[e]}),a=r.filter(function(e){return p[e.index]!==e}).map(function(e){return p[e.index]=e,e.index}),a.length>0&&v.notify({rows:a},null,null)}})}function d(){c(),u()}var f=new n.Event,v=new n.Event,p={};if(!i(e.itemsSource))throw new Error("`itemsSource` must be an observableArray.");return{getLength:t,getItem:l,getItemMetadata:s,getItems:a,subscribe:d,onRowCountChanged:f,onRowsChanged:v}}}),define("text!scalejs.grid-slick/filters/filters.html",[],function(){return'<div id="number_filter_template">\r\n    <div data-bind="css: { iconArrowLeft: !flipped(), iconArrowRight: flipped }"></div> \r\n        <div class="numberFilter">\r\n            Select Value: \r\n               <div>Quick Search: <input data-bind="value: quickSearch, valueUpdate: \'afterkeydown\'" /></div> \r\n               <div class="listFilterBox">\r\n                   <div data-bind="visible: loading" style="width:100%;height:200px;background:black;opacity:.4;position:absolute"></div> \r\n                    <div>\r\n                        <input type="checkbox" data-bind="checked: all" /> \r\n                        <span>Select All</span> \r\n                    </div> \r\n                    <!-- ko foreach: options --> \r\n                    <div>\r\n                        <input type="checkbox" data-bind="checked: selected" /> \r\n                        <span data-bind="text: value"></span> \r\n                    </div> \r\n                    <!-- /ko --> \r\n               </div> \r\n               Show rows with values that: \r\n            <div class="numberFilterBox">\r\n                <div> \r\n                <input type="checkbox" data-bind="checked: notEmpty" />\r\n                <span>Are Not Empty</span> \r\n                </div>\r\n                <div>and</div> \r\n                <div>\r\n                    <select data-bind="value: comparisonA">\r\n                        <option value="EqualTo">Is Equal To</option> \r\n                        <option value="LessThan">Is Less Than</option> \r\n                        <option value="NotEqualTo">Is Not Equal To</option> \r\n                        <option value="GreaterThan">Is Greater Than</option>         \r\n                    </select>\r\n                </div> \r\n                <input type="text" data-bind="value: valueA, valueUpdate: \'afterkeydown\'" /> \r\n                <div>and</div> \r\n                <div>\r\n                    <select data-bind="value: comparisonB">\r\n                        <option value="EqualTo">Is Equal To</option> \r\n                        <option value="LessThan">Is Less Than</option>\r\n                        <option value="NotEqualTo">Is Not Equal To</option>\r\n                        <option value="GreaterThan">Is Greater Than</option> \r\n                    </select>\r\n                </div> \r\n                <input type="text" data-bind="value: valueB, valueUpdate: \'afterkeydown\'" /> \r\n            </div> \r\n    </div>  \r\n</div> \r\n \r\n<div id="string_filter_template">\r\n    <div data-bind="css: { iconArrowLeft: !flipped(), iconArrowRight: flipped }"></div> \r\n    <div class="numberFilter">\r\n        Select Value: \r\n        <div>Quick Search:  <input data-bind="value: quickSearch, valueUpdate: \'afterkeydown\'" /></div> \r\n        <div class="listFilterBox">\r\n            <div data-bind="visible: loading" style="width:100%;height:200px;background:black;opacity:.4;position:absolute"></div> \r\n            <div>\r\n                <input type="checkbox" data-bind="checked: all" /> \r\n                <span>Select All</span> \r\n            </div> \r\n            <!-- ko foreach: options --> \r\n            <div>\r\n                <input type="checkbox" data-bind="checked: selected" /> \r\n                <span data-bind="text: value"></span> \r\n            </div> \r\n            <!-- /ko --> \r\n        </div> \r\n        Show rows with values that: \r\n        <div class="numberFilterBox">\r\n            <div>\r\n                <input type="checkbox" data-bind="checked: notEmpty" />\r\n                <span>Are Not Empty</span> \r\n            </div>\r\n            <div>and</div> \r\n            <div>\r\n                <select data-bind="value: comparisonA">\r\n                    <option value="Contains">Contains</option> \r\n                    <option value="StartsWith">Starts With</option> \r\n                    <option value="EndsWith">Ends</option>  \r\n                </select>\r\n            </div> \r\n            <input type="text" data-bind="value: valueA, valueUpdate: \'afterkeydown\'" /> \r\n            <div>and</div> \r\n            <div>\r\n                <select data-bind="value: comparisonB">\r\n                    <option value="Contains">Contains</option> \r\n                    <option value="StartsWith">Starts With</option>\r\n                    <option value="EndsWith">Ends</option>\r\n                </select>\r\n            </div> \r\n            <input type="text" data-bind="value: valueB, valueUpdate: \'afterkeydown\'" />\r\n        </div> \r\n    </div>  \r\n</div>  \r\n\r\n'}),define("scalejs.grid-slick/filters/observableFilters",["scalejs!core","jQuery","knockout","text!./filters.html","bPopup","scalejs.statechart-scion","scalejs.mvvm"],function(e,t,n,i){function r(e,i){function r(e){P.quickSearch.dispose(),e&&e.values&&e.values.length?(H(e.values[0]),W(e.values[0])):(H(""),W("")),P.quickSearch=W.subscribe(g)}function g(t){P.fieldQuickSearch.dispose(),e.quickSearch(m(t)?{op:G,values:[t]}:void 0),P.fieldQuickSearch=e.quickSearch.subscribe(r)}function k(){P.filter.dispose();var t=e.value.peek()||[],n="string"===e.type?["Contains","StartsWith","EndsWith"]:["EqualTo","LessThan","NotEqualTo","GreaterThan"];-1===t.indexOf("NotEmpty")&&M(!1),(void 0===t[0]||-1===n.indexOf(t[0].op))&&(V.a(n[0]),V.valA(void 0)),(void 0===t[1]||-1===n.indexOf(t[1].op))&&(V.b(n[0]),V.valB(void 0)),t.forEach(function(e,t){"In"===e.op?$().forEach(function(t){t.selected(e.values.indexOf(t.value)>-1)}):"NotEmpty"===e.op?M(!0):0===t?(V.a(e.op),V.valA(e.values[0])):(V.b(e.op),V.valB(e.values[0]))}),_(t),P.filter=_.subscribe(w)}function w(t){P.fieldValue.dispose(),e.value(t),P.fieldValue=e.value.subscribe(k)}function y(e,t){return{selected:p(m(t)?t:U()),value:m(e)?e.toString():""}}function S(e){_(e||[])}function C(){U(!0),$().forEach(function(e){e.selected(!0)})}function E(){U(!1),$().forEach(function(e){e.selected(!1)})}function q(){return $().filter(function(e){return e.selected()})}function x(){V.valA(void 0),V.valB(void 0),M(!1)}function A(e){L=t(e.find(".slick-filter")[0]),L.click(function(){function e(e){return J(e),e?L.offset().left-D.width()-i.width+10:L.offset().left+20}D||(D=t('<div class="slick-filter-popup" data-bind="template: { name: popupTemplate, data: $data}"></div>').appendTo("body"),n.applyBindings(R,D.get()[0]));var r=e(L.offset().left+10+D.width()>window.innerWidth),o=L.offset().top+D.height()>window.innerHeight?window.innerHeight-D.height():L.offset().top-10;N("filter.open"),D.bPopup({follow:[!1,!1],position:[r,o],opacity:0,speed:0,onClose:function(){N("filter.close")}});var a=D.find("div")[0];t(a).css("top",L.offset().top-o)})}function j(){return o(l("filter",c(function(){N=this.send,this.initial=!0}),a("filter.view",a("filter.hidden",c(function(t,n){P.quickSearchSub=W.subscribe(function(e){H(e)}),P.quickSub=H.subscribe(function(e){P.quickSearchSub.dispose(),W(e),P.quickSearchSub=W.subscribe(function(e){H(e)}),n("filter.model.all")||N("filter.all")}),this.initial&&(k(e.value()),r(e.quickSearch()),this.initial=!1)}),d(function(){P.quickSearchSub.dispose(),P.quickSub.dispose()}),s("filter.open",f("filter.shown"))),a("filter.shown",c(function(){Q(!0);var e=z.subscribe(function(){Q(!1),e.dispose()});W.valueHasMutated()}),s("filter.close",f("filter.hidden")))),a("filter.model",a("filter.model.all",c(function(){C(),x(),S(F()),P.list=O.subscribe(function(e){e?N("filter.list"):0===q().length&&N("filter.value")}),P.value=T.subscribe(function(){N("filter.value")})}),d(function(){P.list.dispose(),P.value.dispose()}),a("filter.all.hidden",c(function(){this.quickSubAll=H.subscribe(function(){S(F())})}),d(function(){this.quickSubAll.dispose()}),u("filter.shown",f("filter.all.shown"))),a("filter.all.shown",c(function(){H(W()),P.all=U.subscribe(function(e){e||N("filter.value")}),P.quick=W.subscribe(function(e){void 0!==e&&(H(W()),S(F()))})}),d(function(){P.all.dispose(),P.quick.dispose()}),u("filter.hidden",f("filter.all.hidden")))),a("filter.model.list",c(function(){U(!1),x(),S(O()),P.list=O.subscribe(function(e){e?S(e):0===q().length?N("filter.value"):N("filter.all")}),P.value=T.subscribe(function(){N("filter.value")})}),d(function(){P.list.dispose(),P.value.dispose()}),a("filter.list.hidden",u("filter.shown",f("filter.list.shown"))),a("filter.list.shown",c(function(){H(""),P.all=U.subscribe(function(){N("filter.all")})}),d(function(){P.all.dispose()}),u("filter.hidden",f("filter.list.hidden")))),a("filter.model.value",c(function(){E(),H(""),S(T()),P.list=O.subscribe(function(e){e?N("filter.list"):q().length>0&&N("filter.all")}),P.value=T.subscribe(function(e){S(e)})}),d(function(){P.list.dispose(),P.value.dispose()}),a("filter.value.hidden",u("filter.shown",f("filter.value.shown"))),a("filter.value.shown",c(function(){P.all=U.subscribe(function(){N("filter.all")})}),d(function(){P.all.dispose()}),u("filter.hidden",f("filter.value.hidden")))),s("filter.all",v("filter.model.all")),s("filter.list",v("filter.model.list")),s("filter.value",v("filter.model.value")))))}function I(){X.start()}var T,O,F,B,R,L,D,N,_=p([]),W=p(),G=e.quickFilterOp||"StartsWith",V={a:p(),valA:p(),b:p(),valB:p()},M=p(!1),U=p(!0),Q=p(!1),z=e.values,H=p(""),$=h([]),J=p(!1),P={};P.fieldQuickSearch=e.quickSearch.subscribe(r),P.quickSearch=W.subscribe(g),_.equalityComparer=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},P.fieldValue=e.value.subscribe(k),P.filter=_.subscribe(w),z.subscribe(function(e){var t,n=1===_().length&&"In"===_()[0].op?_()[0].values:[];t=n.length>0?e.map(function(e){return y(e,n.indexOf(e.toString())>-1)}):e.groupJoin($(),"$.toString()","$.value",function(e,t){return t.elementAtOrDefault(0,y(e))}).toArray(),$(t)}),T=b(function(){var e=[];return V.valA()&&e.push({op:V.a(),values:[V.valA()]}),V.valB()&&e.push({op:V.b(),values:[V.valB()]}),M()&&e.push({op:"NotEmpty",values:[]}),e.length>0?e:void 0}),O=b(function(){var e=$().filter(function(e){return e.selected()});return e.length>0&&e.length<$().length?[{op:"In",values:e.map(function(e){return e.value})}]:void 0}),F=b(function(){return H()?[{op:G,values:[H()]}]:U()&&W()?[{op:G,values:[W()]}]:[]}),B=b(function(){return _().length>0}),R={comparisonA:V.a,comparisonB:V.b,valueA:V.valA,valueB:V.valB,quickSearch:W,all:U,options:$,popupTemplate:"string"===e.type?"string_filter_template":"number_filter_template",value:H,filterOn:B,flipped:J,notEmpty:M,loading:Q};var X=j(),K=!1;return{bindings:R,start:I,initalized:K,init:A}}var o=e.state.builder.statechart,a=e.state.builder.state,l=e.state.builder.parallel,s=e.state.builder.on,u=e.state.builder.whenInStates,c=e.state.builder.onEntry,d=e.state.builder.onExit,f=e.state.builder.goto,v=e.state.builder.gotoInternally,p=n.observable,b=n.computed,h=n.observableArray,g=(n.utils.unwrapObservable,e.mvvm.registerTemplates),m=e.object.has;return g(i),function(){function e(e){e.onHeaderRowCellRendered.subscribe(function(e,i){var o=t(i.node),a=o[0],l=i.column.filter,s='<input type="text" data-bind="value: value, valueUpdate: \'afterkeydown\'"/><div class="slick-filter" data-bind="css: { iconFilterOff: !filterOn(), iconFilterOn: filterOn }"></div>';l&&(l.state||(l.state=r(l,i.column)),o.html(s),n.applyBindings(l.state.bindings,a),l.state.init(o),l.state.initalized||(l.state.start(),l.state.initialized=!0))})}function i(){}return{init:e,destroy:i}}}),define("scalejs.grid-slick/filters/defaultFilters",["scalejs!core","knockout"],function(e,t){var n=t.observable,i=t.computed,r=e.object.has,o=e.object.valueOrDefault;return function(e,t){function a(e,t){var n;if(evaluate=d[e.op],"In"===e.op||"NotEmpty"===e.op)n=evaluate(t,e.values);else for(var i=0;i<e.values.length&&(n=evaluate(t,o(e.values[i],"").toString()),n);i+=1);return n}function l(e){return"string"==typeof e?e.toLowerCase():e}function u(e){return function(t){return r(t,e)?l(t[e]):-Number.MAX_VALUE}}var c,d={EqualTo:function(e,t){return parseFloat(e)===parseFloat(t)},GreaterThan:function(e,t){return parseFloat(e)>parseFloat(t)},LessThan:function(e,t){return parseFloat(e)<parseFloat(t)},NotEqualTo:function(e,t){return parseFloat(e)!==parseFloat(t)},In:function(e,t){return t.some(function(t){return e.match(new RegExp("^"+t+"$","i"))})},Contains:function(e,t){return e.match(new RegExp(t,"i"))},StartsWith:function(e,t){return e.match(new RegExp("^"+t,"i"))},EndsWith:function(e,t){return e.match(new RegExp(t+"$","i"))},NotEmpty:function(e){return""!==e}};return e.forEach(function(e){var i=n(""),l=e.filter.quickFilterOp;e.filter={type:e.filter.type,quickFilterOp:l,value:n(),quickSearch:i,values:n([])},i.subscribe(function(){var n=t().where(function(t){var n=!0;ops=operations.filter(function(t){return t.id!==e.id});for(var i=0;i<ops.length&&(n=a(ops[i],t[ops[i].id]),n);i++);return n}).distinct(function(t){return r(t[e.id])?t[e.id]:void 0}).orderBy(u(e.id)).select(function(t){return o(t[e.id],"").toString()});i().values[0]&&(s=i().values[0].toLowerCase(),n=n.where(function(e){return e=e.toLowerCase(),"Contains"===l?-1!==e.indexOf(s):0===e.indexOf(s)})),e.filter.values(n.take(50).toArray())})}),c=i(function(){if(operations=e.selectMany(function(e){return e.filter.value()},function(e,t){return{id:e.id,op:t.op,values:t.values}}).toArray(),operations.length>0){var n=t().filter(function(e){for(var t,n=0;n<operations.length&&(t=a(operations[n],e[operations[n].id]),t);n++);return t});return n}return t()})}}),define("scalejs.grid-slick/sorting/observableSorting",["scalejs!core","knockout"],function(e,t){"use strict;";return function(e){function n(n){n.onSort.subscribe(function(t,n){var i=n.multiColumnSort?n.sortCols:[n];i=i.reduce(function(e,t){return e[t.sortCol.field]=t.sortAsc,e},{}),e(i)}),t.computed(function(){if(void 0!==e()){var t=Object.keys(e()).map(function(t){return{columnId:t,sortAsc:e()[t]}});n.setSortColumns(t)}})}function i(){}return{init:n,destroy:i}}}),define("scalejs.grid-slick/sorting/defaultSorting",["scalejs!core","knockout"],function(e,t){{var n=e.object.has;t.computed}return function(e,i,r){function o(e){return"string"==typeof e?e.toLowerCase():e}function a(e){return function(t){return n(t,e)?o(t[e]):-Number.MAX_VALUE}}function l(e,t){function n(e,t){return t.sortAsc?e.thenBy(a(t.column)):e.thenByDescending(a(t.column))}function i(e,t){return t.sortAsc?e.orderBy(a(t.column)):e.orderByDescending(a(t.column))}var r;return t&&0!==t.length?(r=i(e,t[0]),r=t.skip(1).aggregate(r,n),e=r.toArray()):e}var s;return s=t.computed(function(){if(void 0===e())return r();var t=Object.keys(e()).map(function(t){return{column:t,sortAsc:e()[t]}});return orderedItems=l(r(),t)})}}),define("scalejs.grid-slick/changesFlasher",["scalejs!core"],function(e){return function(t,n){function i(e){if("string"==typeof n.key)return e[n.key];var t=n.key.map(function(t){return e[t]}).join("_");return t}function r(){var e,n;for(n=0;n<t.getDataLength();n+=1)e=t.getDataItem(n),a(e)&&(u[i(e)]=e)}var o=e.object.clone,a=e.object.has,l=e.object.diff,s=e.object.merge,u={};n=s({speed:1e3,key:"id"},n),n.fields=a(n.fields)?n.fields:t.getColumns().map(function(e){return e.field}),t.getData().onRowsChanged.subscribe(function(e,s){var c=s.rows,d=(new Date).getTime().toString(),f="flash_chaged_"+d,v="flash_changes_"+d,p=o(a(t.getCellCssStyles(f))||{}),b=o(a(t.getCellCssStyles(v))||{});c.forEach(function(e){var r,o,s,c,d;r=t.getDataItem(e),a(r)&&(o=u[i(r)],a(o)&&a(o)&&o!==r&&(s=l(o,r,n.fields),c={},d={},Object.keys(s).forEach(function(e){var t=s[e][0],n=s[e][1];n>t&&(d[e]="slick-cell-changed-up",c[e]="slick-cell-changed"),t>n&&(d[e]="slick-cell-changed-down",c[e]="slick-cell-changed")}),p[e]=c,b[e]=d))}),t.setCellCssStyles(f,p),t.setCellCssStyles(v,b),r(),setTimeout(function(){t.removeCellCssStyles(v)},100),setTimeout(function(){t.removeCellCssStyles(f)},n.speed)})}}),define("scalejs.grid-slick/slickGrid",["scalejs!core","require","knockout","jQuery","slick.grid","./observableDataview","./filters/observableFilters","./filters/defaultFilters","./sorting/observableSorting","./sorting/defaultSorting","./changesFlasher"],function(e,t,n,i,r,o,a,l,s,u,c){function d(t,d){function f(e){var t,n=I.filter(function(e){return e.filter});return 0===n.length?e:(t=n.some(function(e){return!e.filter.value})?l(n,e):e,T.push(a()),t)}function g(e){var t,n=d.sorting,i=I.filter(function(e){return e.sortable});return void 0===n?e:(d.customSort?t=e:(n=v(d.sorting)?d.sorting:h(),t=u(n,i,e)),T.push(s(n)),t)}function m(e){var t;return t=d.itemsCount?e:n.computed(function(){return e().map(function(e,t){return e.index=t,e})})}function k(){x=d.itemsSource,x=g(x),x=f(x),x=m(x)}function w(){A=o(b(d,{itemsSource:x})),A.onRowCountChanged.subscribe(function(){j.updateRowCount(),j.render()}),A.onRowsChanged.subscribe(function(e,t){var n,i;n=j.getRenderedRange(),i=t.rows.filter(function(e){return e>=n.top&&e<=n.bottom}),i.length>0&&(j.invalidateRows(i),j.render())})}function y(){d.explicitInitialization=!0,j=new r.Grid(t,A,I,d),i(t).data("slickgrid",j),j.setSelectionModel(new r.RowSelectionModel),T.forEach(function(e){e.init(j)}),v(d.columns)&&d.columns.subscribe(function(){I=n.unwrap(d.columns),j.setColumns(I)}),d.changesFlasher&&c(j,d.changesFlasher),j.init()}function S(){A.subscribe()}function C(){p(d.selectedItem)?j.getSelectionModel().onSelectedRangesChanged.subscribe(function(){var e=[];j.getSelectedRows().forEach(function(t){e.push(j.getDataItem(t))}),d.selectedItem(e)}):v(d.selectedItem)&&j.getSelectionModel().onSelectedRangesChanged.subscribe(function(){var e,t;e=j.getSelectedRows(),t=j.getDataItem(e[0]),d.selectedItem(t)})}function E(){var e;v(d.viewport)&&(j.onViewportChanged.subscribe(function(){var e=j.getViewport();d.viewport(e)}),d.viewport.subscribe(function(t){(t.top>e+2||t.top<e-2)&&(j.scrollRowIntoView(t.top),e=t.top)}))}function q(){e.layout&&e.layout.onLayoutDone&&e.layout.onLayoutDone(function(){if(j.resizeCanvas(),v(d.viewport)){var e=j.getViewport();d.viewport(e)}})}var x,A,j,I=n.unwrap(d.columns),T=[];k(),w(),y(),S(),C(),E(),q()}function f(e,t,n){var i=n(),r=i.slickGrid;return d(e,r),{controlsDescendantBindings:!0}}{var v=n.isObservable,p=function(e){return v(e)&&e.indexOf},b=e.object.merge,h=(e.object.has,e.linq.enumerable.from,n.observable);n.observableArray,n.computed,e.object.valueOrDefault}return{init:f}}),define("scalejs.grid-slick",["./scalejs.grid-slick/slickGrid","knockout","scalejs.linq-linqjs"],function(e,t){t.bindingHandlers.slickGrid=e});