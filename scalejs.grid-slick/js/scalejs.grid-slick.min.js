define("scalejs.grid-slick/observableDataview",["knockout","slick.grid"],function(e,t){var n=e.isObservable,i=e.computed;return function(e){function r(){return n(e.itemsCount)?e.itemsCount():e.itemsSource().length}function o(){return v}function l(e){return v?v[e]:null}function a(e){var t=v[e];return t?t.metadata:null}function s(){var t=0;n(e.itemsCount)?e.itemsCount.subscribe(function(e){d.notify({previous:t,current:e},null,null),t=e}):i({read:function(){var n=e.itemsSource()||[],i=n.length;i!==t&&(d.notify({previous:t,current:i},null,null),t=i)}})}function u(){i({read:function(){var t,n,i,r=e.itemsSource()||[],o=[];t=Object.keys(v).map(function(e){return parseInt(e,10)}),n=r.map(function(e){return e.index}),i=t.except(n).toArray(),i.forEach(function(e){delete v[e]}),o=r.filter(function(e){return v[e.index]!==e}).map(function(e){return v[e.index]=e,e.index}),o.length>0&&f.notify({rows:o},null,null)}})}function c(){u(),s()}var d=new t.Event,f=new t.Event,v={};if(!n(e.itemsSource))throw new Error("`itemsSource` must be an observableArray.");return{getLength:r,getItem:l,getItemMetadata:a,getItems:o,subscribe:c,onRowCountChanged:d,onRowsChanged:f}}}),define("text!scalejs.grid-slick/filters.html",[],function(){return'<div id="number_filter_template">\r\n    <div data-bind="css: { iconArrowLeft: !flipped(), iconArrowRight: flipped }"></div> \r\n        <div class="numberFilter">\r\n            Select Value: \r\n               <div>Quick Search: <input data-bind="value: quickSearch, valueUpdate: \'afterkeydown\'" /></div> \r\n               <div class="listFilterBox">\r\n                   <div data-bind="visible: loading" style="width:100%;height:200px;background:black;opacity:.2;position:absolute"></div> \r\n                    <div>\r\n                        <input type="checkbox" data-bind="checked: all" /> \r\n                        <span>Select All</span> \r\n                    </div> \r\n                    <!-- ko foreach: options --> \r\n                    <div>\r\n                        <input type="checkbox" data-bind="checked: selected" /> \r\n                        <span data-bind="text: value"></span> \r\n                    </div> \r\n                    <!-- /ko --> \r\n               </div> \r\n               Show rows with values that: \r\n            <div class="numberFilterBox">\r\n                <div> \r\n                <input type="checkbox" data-bind="checked: notEmpty" />\r\n                <span>Are Not Empty</span> \r\n                </div>\r\n                <div>and</div> \r\n                <div>\r\n                    <select data-bind="value: comparisonA">\r\n                        <option value="EqualTo">Is Equal To</option> \r\n                        <option value="LessThan">Is Less Than</option> \r\n                        <option value="NotEqualTo">Is Not Equal To</option> \r\n                        <option value="GreaterThan">Is Greater Than</option>         \r\n                    </select>\r\n                </div> \r\n                <input type="text" data-bind="value: valueA, valueUpdate: \'afterkeydown\'" /> \r\n                <div>and</div> \r\n                <div>\r\n                    <select data-bind="value: comparisonB">\r\n                        <option value="EqualTo">Is Equal To</option> \r\n                        <option value="LessThan">Is Less Than</option>\r\n                        <option value="NotEqualTo">Is Not Equal To</option>\r\n                        <option value="GreaterThan">Is Greater Than</option> \r\n                    </select>\r\n                </div> \r\n                <input type="text" data-bind="value: valueB, valueUpdate: \'afterkeydown\'" /> \r\n            </div> \r\n    </div>  \r\n</div> \r\n \r\n<div id="string_filter_template">\r\n    <div data-bind="css: { iconArrowLeft: !flipped(), iconArrowRight: flipped }"></div> \r\n    <div class="numberFilter">\r\n        Select Value: \r\n        <div>Quick Search:  <input data-bind="value: quickSearch, valueUpdate: \\afterkeydown\\" /></div> \r\n        <div class="listFilterBox">\r\n            <div data-bind="visible: loading" style="width:100%;height:200px;background:black;opacity:.2;position:absolute"></div> \r\n            <div>\r\n                <input type="checkbox" data-bind="checked: all" /> \r\n                <span>Select All</span> \r\n            </div> \r\n            <!-- ko foreach: options --> \r\n            <div>\r\n                <input type="checkbox" data-bind="checked: selected" /> \r\n                <span data-bind="text: value"></span> \r\n            </div> \r\n            <!-- /ko --> \r\n        </div> \r\n        Show rows with values that: \r\n        <div class="numberFilterBox">\r\n            <div>\r\n                <input type="checkbox" data-bind="checked: notEmpty" />\r\n                <span>Are Not Empty</span> \r\n            </div>\r\n            <div>and</div> \r\n            <div>\r\n                <select data-bind="value: comparisonA">\r\n                    <option value="Contains">Contains</option> \r\n                    <option value="StartsWith">Starts With</option> \r\n                    <option value="EndsWith">Ends</option>  \r\n                </select>\r\n            </div> \r\n            <input type="text" data-bind="value: valueA, valueUpdate: \'afterkeydown\'" /> \r\n            <div>and</div> \r\n            <div>\r\n                <select data-bind="value: comparisonB">\r\n                    <option value="Contains">Contains</option> \r\n                    <option value="StartsWith">Starts With</option>\r\n                    <option value="EndsWith">Ends</option>\r\n                </select>\r\n            </div> \r\n            <input type="text" data-bind="value: valueB, valueUpdate: \'afterkeydown\'" />\r\n        </div> \r\n    </div>  \r\n</div>  \r\n\r\n'}),define("scalejs.grid-slick/observableFilters",["scalejs!core","jQuery","knockout","text!./filters.html","bPopup","scalejs.statechart-scion","scalejs.mvvm"],function(e,t,n,i){"use strict;";function r(e,i){function r(e){$.quickSearch.dispose(),e&&e.values&&e.values.length?(z(e.values[0]),W(e.values[0])):(z(""),W("")),$.quickSearch=W.subscribe(g)}function g(t){$.fieldQuickSearch.dispose(),e.quickSearch(m(t)?{op:G,values:[t]}:void 0),$.fieldQuickSearch=e.quickSearch.subscribe(r)}function k(){$.filter.dispose();var t=e.value.peek()||[],n="string"===e.type?["Contains","StartsWith","EndsWith"]:["EqualTo","LessThan","NotEqualTo","GreaterThan"];-1===t.indexOf("NotEmpty")&&V(!1),(void 0===t[0]||-1===n.indexOf(t[0].op))&&(M.a(n[0]),M.valA(void 0)),(void 0===t[1]||-1===n.indexOf(t[1].op))&&(M.b(n[0]),M.valB(void 0)),t.forEach(function(e,t){"In"===e.op?J().forEach(function(t){t.selected(e.values.indexOf(t.value)>-1)}):"NotEmpty"===e.op?V(!0):0===t?(M.a(e.op),M.valA(e.values[0])):(M.b(e.op),M.valB(e.values[0]))}),_(t),$.filter=_.subscribe(S)}function S(t){$.fieldValue.dispose(),e.value(t),$.fieldValue=e.value.subscribe(k)}function w(e,t){return{selected:p(m(t)?t:U()),value:m(e)?e.toString():""}}function y(e){_(e||[])}function C(){U(!0),J().forEach(function(e){e.selected(!0)})}function E(){U(!1),J().forEach(function(e){e.selected(!1)})}function A(){return J().filter(function(e){return e.selected()})}function q(){M.valA(void 0),M.valB(void 0),V(!1)}function x(e){R=t(e.find(".slick-filter")[0]),R.click(function(){function e(e){return P(e),e?R.offset().left-D.width()-i.width+10:R.offset().left+20}D||(D=t('<div class="slick-filter-popup" data-bind="template: { name: popupTemplate, data: $data}"></div>').appendTo("body"),n.applyBindings(L,D.get()[0]));var r=e(R.offset().left+10+D.width()>window.innerWidth),o=R.offset().top+D.height()>window.innerHeight?window.innerHeight-D.height():R.offset().top-10;N("filter.open"),D.bPopup({follow:[!1,!1],position:[r,o],opacity:0,speed:0,onClose:function(){N("filter.close")}});var l=D.find("div")[0];t(l).css("top",R.offset().top-o)})}function O(){return o(a("filter",c(function(){N=this.send,this.initial=!0}),l("filter.view",l("filter.hidden",c(function(t,n){$.quickSearchSub=W.subscribe(function(e){z(e)}),$.quickSub=z.subscribe(function(e){$.quickSearchSub.dispose(),W(e),$.quickSearchSub=W.subscribe(function(e){z(e)}),n("filter.model.all")||N("filter.all")}),this.initial&&(k(e.value()),r(e.quickSearch()),this.initial=!1)}),d(function(){$.quickSearchSub.dispose(),$.quickSub.dispose()}),s("filter.open",f("filter.shown"))),l("filter.shown",c(function(){W.valueHasMutated()}),s("filter.close",f("filter.hidden")))),l("filter.model",l("filter.model.all",c(function(){C(),q(),y(B()),$.list=j.subscribe(function(e){e?N("filter.list"):0===A().length&&N("filter.value")}),$.value=I.subscribe(function(){N("filter.value")})}),d(function(){$.list.dispose(),$.value.dispose()}),l("filter.all.hidden",c(function(){this.quickSubAll=z.subscribe(function(){y(B())})}),d(function(){this.quickSubAll.dispose()}),u("filter.shown",f("filter.all.shown"))),l("filter.all.shown",c(function(){z(W()),$.all=U.subscribe(function(e){e||N("filter.value")}),$.quick=W.subscribe(function(e){void 0!==e&&(z(W()),y(B()))})}),d(function(){$.all.dispose(),$.quick.dispose()}),u("filter.hidden",f("filter.all.hidden")))),l("filter.model.list",c(function(){U(!1),q(),y(j()),$.list=j.subscribe(function(e){e?y(e):N(0===A().length?"filter.value":"filter.all")}),$.value=I.subscribe(function(){N("filter.value")})}),d(function(){$.list.dispose(),$.value.dispose()}),l("filter.list.hidden",u("filter.shown",f("filter.list.shown"))),l("filter.list.shown",c(function(){z(""),$.all=U.subscribe(function(){N("filter.all")})}),d(function(){$.all.dispose()}),u("filter.hidden",f("filter.list.hidden")))),l("filter.model.value",c(function(){E(),z(""),y(I()),$.list=j.subscribe(function(e){e?N("filter.list"):A().length>0&&N("filter.all")}),$.value=I.subscribe(function(e){y(e)})}),d(function(){$.list.dispose(),$.value.dispose()}),l("filter.value.hidden",u("filter.shown",f("filter.value.shown"))),l("filter.value.shown",c(function(){$.all=U.subscribe(function(){N("filter.all")})}),d(function(){$.all.dispose()}),u("filter.hidden",f("filter.value.hidden")))),s("filter.all",v("filter.model.all")),s("filter.list",v("filter.model.list")),s("filter.value",v("filter.model.value")))))}function T(){filterStatechart.start()}var I,j,B,F,L,R,D,L,N,_=p([]),W=p(),G=e.quickFilterOp||"StartsWith",M={a:p(),valA:p(),b:p(),valB:p()},V=p(!1),U=p(!0),Q=p(!1),H=e.values,z=p(""),J=h([]),P=p(!1),$={};$.fieldQuickSearch=e.quickSearch.subscribe(r),$.quickSearch=W.subscribe(g),_.equalityComparer=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},$.fieldValue=e.value.subscribe(k),$.filter=_.subscribe(S),H.subscribe(function(e){var t,n=1===_().length&&"In"===_()[0].op?_()[0].values:[];t=n.length>0?e.map(function(e){return w(e,n.indexOf(e.toString())>-1)}):e.groupJoin(J(),"$.toString()","$.value",function(e,t){return t.elementAtOrDefault(0,w(e))}).toArray(),J(t)}),I=b(function(){var e=[];return M.valA()&&e.push({op:M.a(),values:[M.valA()]}),M.valB()&&e.push({op:M.b(),values:[M.valB()]}),V()&&e.push({op:"NotEmpty",values:[]}),e.length>0?e:void 0}),j=b(function(){var e=J().filter(function(e){return e.selected()});return e.length>0&&e.length<J().length?[{op:"In",values:e.map(function(e){return e.value})}]:void 0}),B=b(function(){return z()?[{op:G,values:[z()]}]:U()&&W()?[{op:G,values:[W()]}]:[]}),F=b(function(){return _().length>0}),L={comparisonA:M.a,comparisonB:M.b,valueA:M.valA,valueB:M.valB,quickSearch:W,all:U,options:J,popupTemplate:"string"===e.type?"string_filter_template":"number_filter_template",value:z,filterOn:F,flipped:P,notEmpty:V,loading:Q},filterStatechart=O();var X=!1;return{bindings:L,start:T,initalized:X,init:x}}var o=e.state.builder.statechart,l=e.state.builder.state,a=e.state.builder.parallel,s=e.state.builder.on,u=e.state.builder.whenInStates,c=e.state.builder.onEntry,d=e.state.builder.onExit,f=e.state.builder.goto,v=e.state.builder.gotoInternally,p=n.observable,b=n.computed,h=n.observableArray,g=(n.utils.unwrapObservable,e.mvvm.registerTemplates),m=e.object.has;return g(i),function(){function e(e){e.onHeaderRowCellRendered.subscribe(function(e,i){var o=t(i.node),l=o[0],a=i.column.filter,s='<input type="text" data-bind="value: value, valueUpdate: \'afterkeydown\'"/><div class="slick-filter" data-bind="css: { iconFilterOff: !filterOn(), iconFilterOn: filterOn }"></div>';a&&(a.state||(a.state=r(a,i.column)),o.html(s),n.applyBindings(a.state.bindings,l),a.state.init(o),a.state.initalized||(a.state.start(),a.state.initialized=!0))})}function i(){}return{init:e,destroy:i}}}),define("scalejs.grid-slick/changesFlasher",["scalejs!core"],function(e){return function(t){function n(e){function n(e){if("string"==typeof t.key)return e[t.key];var n=t.key.map(function(t){return e[t]}).join("_");return n}function i(){var t,i;for(i=0;i<e.getDataLength();i+=1)t=e.getDataItem(i),o(t)&&(a[n(t)]=t)}var a={};t.fields=o(t.fields)?t.fields:e.getColumns().map(function(e){return e.field}),e.getData().onRowsChanged.subscribe(function(s,u){var c=u.rows,d=(new Date).getTime().toString(),f="flash_chaged_"+d,v="flash_changes_"+d,p=r(o(e.getCellCssStyles(f))||{}),b=r(o(e.getCellCssStyles(v))||{});c.forEach(function(i){var r,s,u,c,d;r=e.getDataItem(i),o(r)&&(s=a[n(r)],o(s)&&o(s)&&s!==r&&(u=l(s,r,t.fields),c={},d={},Object.keys(u).forEach(function(e){var t=u[e][0],n=u[e][1];n>t&&(d[e]="slick-cell-changed-up",c[e]="slick-cell-changed"),t>n&&(d[e]="slick-cell-changed-down",c[e]="slick-cell-changed")}),p[i]=c,b[i]=d))}),e.setCellCssStyles(f,p),e.setCellCssStyles(v,b),i(),setTimeout(function(){e.removeCellCssStyles(v)},100),setTimeout(function(){e.removeCellCssStyles(f)},t.speed)})}function i(){}var r=e.object.clone,o=e.object.has,l=e.object.diff,a=e.object.merge;return t=a({speed:1e3,key:"id"},t),{init:n,destroy:i}}}),define("scalejs.grid-slick/slickGrid",["scalejs!core","require","knockout","jQuery","slick.grid","./observableDataview","./observableFilters","./changesFlasher"],function(e,t,n,i,r,o){function l(l,a){function g(){O=o(d(a,{itemsSource:I})),O.onRowCountChanged.subscribe(function(){T.updateRowCount(),T.render()}),O.onRowsChanged.subscribe(function(e,t){var n,i;n=T.getRenderedRange(),i=t.rows.filter(function(e){return e>=n.top&&e<=n.bottom}),i.length>0&&(T.invalidateRows(i),T.render())})}function m(){function e(e){var t=Object.keys(e),n=t[0];T.setSortColumn(n,e[n])}a.customSort&&u(a.sorting)?(T.onSort.subscribe(function(e,t){if(t.multiColumnSort)throw new Error("Multi column sort is not implemented");var n={};n[t.sortCol.field]=t.sortAsc,a.sorting(n)}),e(a.sorting()),a.sorting.subscribe(e),a.sorting.valueHasMutated()):u(a.sorting)?T.onSort.subscribe(function(e,t){var n=t.multiColumnSort?t.sortCols:[t],i={};n.forEach(function(e){i[e.sortCol.field]=e.sortAsc}),a.sorting(i),F(n)}):a.sorting&&T.onSort.subscribe(function(e,t){F(t.multiColumnSort?t.sortCols:[t])})}function k(e){return"string"==typeof e?e.toLowerCase():e}function S(e){return function(t){return f(t,e)?k(t[e]):-Number.MAX_VALUE}}function w(e,t){function n(e,t){return t.sortAsc?e.thenBy(S(t.sortCol.field)):e.thenByDescending(S(t.sortCol.field))}function i(e,t){return t.sortAsc?e.orderBy(S(t.sortCol.field)):e.orderByDescending(S(t.sortCol.field))}var r;return t?(r=i(v(e),t[0]),r=v(t).skip(1).aggregate(r,n),T.setSortColumns(t.map(function(e){return{columnId:e.sortCol.field,sortAsc:e.sortAsc}})),e=r.toArray()):e}function y(){var e,n;if(a.explicitInitialization=!0,T=new r.Grid(l,O,a.columns,a),i(l).data("slickgrid",T),u(a.update)&&a.update.subscribe(function(){T.setColumns(a.columns)}),n=a.columns.filter(function(e){return e.defaultSort})){var o=n.map(function(e){return{sortAsc:"asc"===e.defaultSort,sortCol:e}}),s={};u(a.sorting)&&(o.forEach(function(e){s[e.sortCol.field]=e.sortAsc}),a.sorting(s),a.sorting.subscribe(function(e){F(a.columns.reduce(function(t,n){return void 0!==e[n.field]&&t.push({sortAsc:e[n.field],sortCol:n}),t},[]))})),F(o)}T.setSelectionModel(new r.RowSelectionModel),a.plugins?(e=Object.keys(a.plugins).map(function(e){return["observableFilters","changesFlasher"].indexOf(e)>=0?"./"+e:e}),t(e,function(){var e,t,n;for(e=0;e<arguments.length;e+=1)n=arguments[e],t=n(a.plugins[n.name]),T.registerPlugin(t);T.init()})):T.init()}function C(){O.subscribe()}function E(){c(a.selectedItem)?T.getSelectionModel().onSelectedRangesChanged.subscribe(function(){var e=[];T.getSelectedRows().forEach(function(t){e.push(T.getDataItem(t))}),a.selectedItem(e)}):u(a.selectedItem)&&T.getSelectionModel().onSelectedRangesChanged.subscribe(function(){var e,t;e=T.getSelectedRows(),t=T.getDataItem(e[0]),a.selectedItem(t)})}function A(){var e;u(a.viewport)&&(T.onViewportChanged.subscribe(function(){var e=T.getViewport();a.viewport(e)}),a.viewport.subscribe(function(t){(t.top>e+2||t.top<e-2)&&(T.scrollRowIntoView(t.top),e=t.top)}))}function q(){e.layout&&e.layout.onLayoutDone&&e.layout.onLayoutDone(function(){if(T.resizeCanvas(),u(a.viewport)){var e=T.getViewport();a.viewport(e)}})}function x(){function e(e,n){var i;if(evaluate=t[e.op],"In"===e.op||"NotEmpty"===e.op)i=evaluate(n,e.values);else for(var r=0;r<e.values.length&&(i=evaluate(n,h(e.values[r],"").toString()),i);r+=1);return i}var t={EqualTo:function(e,t){return parseFloat(e)===parseFloat(t)},GreaterThan:function(e,t){return parseFloat(e)>parseFloat(t)},LessThan:function(e,t){return parseFloat(e)<parseFloat(t)},NotEqualTo:function(e,t){return parseFloat(e)!==parseFloat(t)},In:function(e,t){return e=h(e,"").toString(),t.contains(e)},Contains:function(e,t){return e=h(e,"").toString().toLowerCase(),t=h(t,"").toString().toLowerCase(),-1!==e.indexOf(t)},StartsWith:function(e,t){return e=h(e,"").toString().toLowerCase(),t=h(t,"").toString().toLowerCase(),0===e.indexOf(t)},EndsWith:function(e,t){return e=h(e,"").toString().toLowerCase(),t=h(t,"").toString().toLowerCase(),-1!==e.indexOf(t,e.length-t.length)},NotEmpty:function(e){return f(e)&&""!==e}};j.forEach(function(t){var n=p();t.filter={type:t.filter.type,quickFilterOp:t.quickFilterOp,value:p(),quickSearch:n,values:p([])},n.subscribe(function(){var i=a.itemsSource().where(function(n){var i=!0;ops=B.filter(function(e){return e.id!==t.id});for(var r=0;r<ops.length&&(i=e(ops[r],n[ops[r].id]),i);r++);return i}).distinct(function(e){return f(e[t.id])?e[t.id]:void 0}).orderBy(S(t.id)).select(function(e){return h(e[t.id],"").toString()});n().values[0]&&(s=n().values[0].toLowerCase(),i=i.where(function(e){return e=e.toLowerCase(),"Contains"===n.op?-1!==e.indexOf(s):0===e.indexOf(s)})),t.filter.values(i.toArray())})}),L=b(function(){if(B=j.selectMany(function(e){return e.filter.value()},function(e,t){return{id:e.id,op:t.op,values:t.values}}).toArray(),B.length>0){var t=a.itemsSource().filter(function(t){for(var n,i=0;i<B.length&&(n=e(B[i],t[B[i].id]),n);i++);return n});return t}return a.itemsSource()})}var O,T,I,j,B,F=n.observable(),L=a.itemsSource;j=a.columns.filter(function(e){return e.filter&&!u(e.filter.value)}),j.length>0&&x(),I=a.sorting===!0||u(a.sorting)&&!a.customSort?n.computed(function(){var e=w(L(),F());return e.forEach(function(e,t){e.index=t}),e}):L,g(),y(),C(),E(),m(),A(),q()}function a(e,t,n){var i=n(),r=i.slickGrid;return l(e,r),{controlsDescendantBindings:!0}}var u=n.isObservable,c=function(e){return u(e)&&e.indexOf},d=e.object.merge,f=e.object.has,v=e.linq.enumerable.from,p=n.observable,b=(n.observableArray,n.computed),h=e.object.valueOrDefault;return{init:a}}),define("scalejs.grid-slick",["./scalejs.grid-slick/slickGrid","knockout","scalejs.linq-linqjs"],function(e,t){t.bindingHandlers.slickGrid=e});