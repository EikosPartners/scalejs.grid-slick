define("scalejs.grid-slick/observableDataview",["knockout","slick.grid"],function(e,t){var n=e.isObservable,i=e.computed;return function(e){function r(){return n(e.itemsCount)?e.itemsCount():e.itemsSource().length}function l(e){return f?f[e]:null}function o(e){var t=f[e];return t?t.metadata:null}function a(){var t=0;n(e.itemsCount)?e.itemsCount.subscribe(function(e){u.notify({previous:t,current:e},null,null),t=e}):i({read:function(){var n=e.itemsSource()||[],i=n.length;u.notify({previous:t,current:i},null,null),t=i}})}function s(){i({read:function(){var t,n,i,r=e.itemsSource()||[],l=[];t=Object.keys(f).map(function(e){return parseInt(e,10)}),n=r.map(function(e){return e.index}),i=t.except(n).toArray(),i.forEach(function(e){delete f[e]}),l=r.filter(function(e){return f[e.index]!==e}).map(function(e){return f[e.index]=e,e.index}),l.length>0&&d.notify({rows:l},null,null)}})}function c(){s(),a()}var u=new t.Event,d=new t.Event,f={};if(!n(e.itemsSource))throw new Error("`itemsSource` must be an observableArray.");return{getLength:r,getItem:l,getItemMetadata:o,subscribe:c,onRowCountChanged:u,onRowsChanged:d}}}),define("text!scalejs.grid-slick/filters.html",[],function(){return'<div id="number_filter_template">\r\n    <div data-bind="css: { iconArrowLeft: !flipped(), iconArrowRight: flipped }"></div>\r\n   <div class="numberFilter">\r\n        SELECT VALUE:\r\n       <div>QUICK SEARCH: <input data-bind="value: quickSearch, valueUpdate: \'afterkeydown\'" /></div>\r\n       <div class="listFilterBox">\r\n           <div><input type="checkbox" data-bind="checked: all" />\r\n               <span>Select All</span>\r\n           </div>\r\n           <!-- ko foreach: options -->\r\n           <div><input type="checkbox" data-bind="checked: selected" />\r\n               <span data-bind="text: name.toUpperCase()"></span>\r\n           </div>\r\n           <!-- /ko -->\r\n       </div>\r\n       SHOW ROWS WITH VALUES THAT:\r\n       <div class="numberFilterBox">\r\n           <div><select data-bind="value: comparisonA">\r\n                <option value="=">IS EQUAL TO</option>\r\n                <option value="<">IS LESS THAN</option>\r\n                <option value="!=">IS NOT EQUAL TO</option>\r\n                <option value=">">IS GREATER THAN</option>                \r\n           </select></div>\r\n           <input type="text" data-bind="value: valueA, valueUpdate: \'afterkeydown\'" />\r\n           <div>AND</div>\r\n            <div><select data-bind="value: comparisonB">\r\n                <option value="=">IS EQUAL TO</option>\r\n                <option value="<">IS LESS THAN</option>\r\n                <option value="!=">IS NOT EQUAL TO</option>\r\n                <option value=">">IS GREATER THAN</option>                \r\n           </select></div>\r\n           <input type="text" data-bind="value: valueB, valueUpdate: \'afterkeydown\'" />\r\n       </div>\r\n   </div> \r\n</div>\r\n\r\n<div id="string_filter_template">\r\n    <div data-bind="css: { iconArrowLeft: !flipped(), iconArrowRight: flipped }"></div>\r\n   <div class="numberFilter">\r\n        SELECT VALUE:\r\n       <div>QUICK SEARCH: <input data-bind="value: quickSearch, valueUpdate: \'afterkeydown\'" /></div>\r\n       <div class="listFilterBox">\r\n           <div><input type="checkbox" data-bind="checked: all" />\r\n               <span>Select All</span>\r\n           </div>\r\n           <!-- ko foreach: options -->\r\n           <div><input type="checkbox" data-bind="checked: selected" />\r\n               <span data-bind="text: name.toUpperCase()"></span>\r\n           </div>\r\n           <!-- /ko -->\r\n       </div>\r\n       SHOW ROWS WITH VALUES THAT:\r\n       <div class="numberFilterBox">\r\n           <div><select data-bind="value: comparisonA">\r\n                <option value="contains">CONTAINS</option>\r\n                <option value="starts">STARTS WITH</option>\r\n                <option value="ends">ENDS WITH</option>             \r\n           </select></div>\r\n           <input type="text" data-bind="value: valueA, valueUpdate: \'afterkeydown\'" />\r\n           <div>AND</div>\r\n            <div><select data-bind="value: comparisonB">\r\n                <option value="contains">CONTAINS</option>\r\n                <option value="starts">STARTS WITH</option>\r\n                <option value="ends">ENDS WITH</option>                \r\n           </select></div>\r\n           <input type="text" data-bind="value: valueB, valueUpdate: \'afterkeydown\'" />\r\n       </div>\r\n   </div> \r\n</div>\r\n\r\n\r\n'}),define("scalejs.grid-slick/observableFilters",["scalejs!core","jQuery","knockout","text!./filters.html","bPopup","scalejs.statechart-scion"],function(e,t,n,i){function r(e){return{selected:v(!0),name:e.toString()}}function l(e){var t="";switch(e()){case"=":t="EqualTo";break;case">":t="GreaterThan";break;case"<":t="LessThan";break;case"!=":t="NotEqualTo";break;case"contains":t="Contains";break;case"starts":t="StartsWith";break;case"ends":t="EndsWith"}return t}function o(e,i,o,g){function h(){var e=D()||N()||F()||[];console.log(e),console.log(R()),JSON.stringify(e)!==JSON.stringify(R())&&R(e)}function m(){B().forEach(function(e){e.selected(!0)}),H(!0)}function k(){B().forEach(function(e){e.selected(!1)}),H(!1)}function S(e,t){console.log("Subscribing"),_.all=H.subscribe(function(n){U(void 0),"string"==typeof t.all?e(t.all):t.all(e,n)}),_.list=N.subscribe(function(n){U(void 0),"string"==typeof t.list?e(t.list):t.list(e,n)}),_.value=F.subscribe(function(n){U(void 0),"string"==typeof t.value?e(t.value):t.value(e,n)})}function w(){return B().filter(function(e){return e.selected()})}function y(e){0===w().length||N()?h():e("filter.empty")}function A(){console.log("unsubscribing."),_.all.dispose(),_.list.dispose(),_.value.dispose()}function C(){j.valA(void 0),j.valB(void 0)}function T(){return a(s("filter",u(function(){R([]);var e=this;I=t(i.find(".slick-filter")[0]),I.click(function(){function i(e){return q(e),e?I.offset().left-O.width()-g.width+10:I.offset().left+20}O||(O=t('<div class="slick-filter-popup" data-bind="template: { name: popupTemplate, data: $data}"></div>').appendTo("body"),n.applyBindings(E,O.get()[0]));var r=i(I.offset().left+10+O.width()>window.innerWidth),l=I.offset().top+O.height()>window.innerHeight?window.innerHeight-O.height():I.offset().top-10;e.send("filter.open"),O.bPopup({follow:[!1,!1],position:[r,l],opacity:0,speed:0,onClose:function(){e.send("filter.close")}});var o=O.find("div")[0];t(o).css("top",I.offset().top-l)})}),c("filter.open",f("filter.shown")),c("filter.close",f("filter.hidden")),s("filter.hidden",u(function(){this.quickFilterSub=U.subscribe(function(){h()})}),d(function(){this.quickFilterSub.dispose()})),s("filter.shown",u(function(){x(""),U()?this.send("filter.empty"):N()?this.send("filter.list"):F()?this.send("filter.value"):this.send("filter.none")}),c("filter.empty",f("filter.all.selected")),c("filter.list",f("filter.all.deselected.list")),c("filter.value",f("filter.all.deselected.value")),c("filter.none",f("filter.all.deselected.none")),s("filter.all.waiting"),s("filter.all.selected",u(function(){m(),C(),h(),S(this.send,{all:"filter.none",list:function(e,t){t&&e("filter.list")},value:"filter.value"})}),d(function(){A()})),s("filter.all.deselected",s("filter.all.deselected.none",u(function(){k(),C(),h(),S(this.send,{all:"filter.empty",list:"filter.list",value:"filter.value"})}),d(function(){A()})),s("filter.all.deselected.list",u(function(){H(!1),C(),h(),S(this.send,{all:"filter.empty",list:y,value:"filter.value"})}),d(function(){A()})),s("filter.all.deselected.value",u(function(){k(),h(),S(this.send,{all:"filter.empty",list:"filter.list",value:h})}),d(function(){A()}))))))}var E,I,O,R=e.value,x=e.quickSearch||v(),j={a:v(),valA:v(),b:v(),valB:v()},H=v(!0),L=e.values||v(["a","b","c","d"]),U=v(),B=p(function(){return b(L).map(r)}),F=p(function(){var e;return j.valA()&&(e=[{op:l(j.a),values:[j.valA()]}],j.valB()&&e.push({op:l(j.b),values:[j.valB()]})),e}),N=p(function(){var t=B().filter(function(e){return e.selected()});return t.length>0&&t.length<B().length?[{op:"In",values:t.map(function(e){return e.name})}]:H()&&x()?[{op:e.quickFilterOp||"StartsWith",values:[x()]}]:void 0}),D=p(function(){return U()?[{op:e.quickFilterOp||"StartsWith",values:[U()]}]:void 0}),W=p(function(){return U()?!1:N()||F()}),q=v(!1),_={},E={comparisonA:j.a,comparisonB:j.b,valueA:j.valA,valueB:j.valB,quickSearch:x,all:H,options:B,popupTemplate:"string"===e.type?"string_filter_template":"number_filter_template",value:U,filterOn:W,flipped:q};n.applyBindings(E,o),filterStatechart=T(),filterStatechart.start()}var a=e.state.builder.statechart,s=e.state.builder.state,c=e.state.builder.on,u=e.state.builder.onEntry,d=e.state.builder.onExit,f=(e.state.builder.goto,e.state.builder.gotoInternally),v=n.observable,p=n.computed,b=(n.observableArray,n.utils.unwrapObservable),g=e.mvvm.registerTemplates;return g(i),function(){function e(e){e.onHeaderRowCellRendered.subscribe(function(e,n){var i=t(n.node),r=i[0],l=n.column.filter,a='<input type="text" data-bind="value: value, valueUpdate: \'afterkeydown\'"/><div class="slick-filter" data-bind="css: { iconFilterOff: !filterOn(), iconFilterOn: filterOn }"></div>';l&&(i.html(a),o(l,i,r,n.column))})}function n(){}return{init:e,destroy:n}}}),define("scalejs.grid-slick/changesFlasher",["scalejs!core"],function(e){return function(t){function n(e){function n(){var n,r;for(r=0;r<e.getDataLength();r+=1)n=e.getDataItem(r),l(n)&&(i[n[t.key]]=n)}var i={};t.fields=l(t.fields)?t.fields:e.getColumns().map(function(e){return e.field}),e.getData().onRowsChanged.subscribe(function(a,s){var c=s.rows,u=(new Date).getTime().toString(),d="flash_chaged_"+u,f="flash_changes_"+u,v=r(l(e.getCellCssStyles(d))||{}),p=r(l(e.getCellCssStyles(f))||{});c.forEach(function(n){var r,a,s,c,u;r=e.getDataItem(n),l(r)&&(a=i[r[t.key]],l(a)&&l(a)&&a!==r&&(s=o(a,r,t.fields),c={},u={},Object.keys(s).forEach(function(e){var t=s[e][0],n=s[e][1];n>t&&(u[e]="slick-cell-changed-up",c[e]="slick-cell-changed"),t>n&&(u[e]="slick-cell-changed-down",c[e]="slick-cell-changed")}),v[n]=c,p[n]=u))}),e.setCellCssStyles(d,v),e.setCellCssStyles(f,p),n(),setTimeout(function(){e.removeCellCssStyles(f)},100),setTimeout(function(){e.removeCellCssStyles(d)},t.speed)})}function i(){}var r=e.object.clone,l=e.object.has,o=e.object.diff,a=e.object.merge;return t=a({speed:1e3,key:"id"},t),{init:n,destroy:i}}}),define("scalejs.grid-slick/slickGrid",["scalejs!core","require","knockout","jQuery","slick.grid","./observableDataview","./observableFilters","./changesFlasher"],function(e,t,n,i,r,l){function o(n,o){function a(){b=l(o),b.onRowCountChanged.subscribe(function(){g.updateRowCount(),g.render()}),b.onRowsChanged.subscribe(function(e,t){var n,i;n=g.getRenderedRange(),i=t.rows.filter(function(e){return e>=n.top&&e<=n.bottom}),i.length>0&&(g.invalidateRows(i),g.render())})}function c(){s(o.sorting)&&(g.onSort.subscribe(function(e,t){if(t.multiColumnSort)throw new Error("Multi column sort is not implemented");var n={};n[t.sortCol.field]=t.sortAsc,o.sorting(n)}),o.sorting.subscribe(function(e){var t=Object.keys(e),n=t[0];g.setSortColumn(n,e[n])}))}function u(){var e;o.explicitInitialization=!0,g=new r.Grid(n,b,o.columns,o),i(n).data("slickgrid",g),g.setSelectionModel(new r.RowSelectionModel),o.plugins?(e=Object.keys(o.plugins).map(function(e){return["observableFilters","changesFlasher"].indexOf(e)>=0?"./"+e:e}),t(e,function(){var e,t,n;for(e=0;e<arguments.length;e+=1)n=arguments[e],t=n(o.plugins[n.name]),g.registerPlugin(t);g.init()})):g.init()}function d(){b.subscribe()}function f(){s(o.selectedItem)&&g.getSelectionModel().onSelectedRangesChanged.subscribe(function(){var e,t;e=g.getSelectedRows(),t=g.getDataItem(e[0]),o.selectedItem(t)})}function v(){s(o.viewport)&&(g.onViewportChanged.subscribe(function(){var e=g.getViewport();o.viewport(e)}),o.viewport.subscribe(function(e){g.scrollRowIntoView(e.top)}))}function p(){e.layout.onLayoutDone&&e.layout.onLayoutDone(function(){if(g.resizeCanvas(),s(o.viewport)){var e=g.getViewport();o.viewport(e)}})}var b,g;a(),u(),d(),f(),c(),v(),p()}function a(e,t,n){var i=n(),r=i.slickGrid;return o(e,r),{controlsDescendantBindings:!0}}var s=n.isObservable;return{init:a}}),define("scalejs.grid-slick",["./scalejs.grid-slick/slickGrid","knockout","scalejs.linq-linqjs"],function(e,t){t.bindingHandlers.slickGrid=e});