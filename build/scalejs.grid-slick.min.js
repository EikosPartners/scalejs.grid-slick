define("scalejs.grid-slick/observableDataview",["scalejs!core","knockout","slick.grid"],function(a,b,c){var d=b.isObservable,e=b.computed,f=a.object.has;return function(a){function b(){return d(a.itemsCount)?a.itemsCount():a.itemsSource().length}function g(){return o}function h(a){return o?o[a]:null}function i(a){var b=o[a];return b?b.metadata:null}function j(){var b=0;d(a.itemsCount)?a.itemsCount.subscribe(function(a){m.notify({previous:b,current:a},null,null),b=a}):e({read:function(){var c=a.itemsSource()||[],d=c.length;d!==b&&(m.notify({previous:b,current:d},null,null),b=d)}})}function k(){e({read:function(){var b,c,d,e=a.itemsSource()||[],g=[];e=e.filter(function(a){return f(a)}),b=Object.keys(o).map(function(a){return parseInt(a,10)}),c=e.map(function(a){return a.index}),d=b.except(c).toArray(),d.forEach(function(a){delete o[a]}),g=e.filter(function(a){return o[a.index]!==a}).map(function(a){return o[a.index]=a,a.index}),g.length>0&&n.notify({rows:g},null,null)}})}function l(){k(),j()}var m=new c.Event,n=new c.Event,o={};if(!d(a.itemsSource))throw new Error("`itemsSource` must be an observableArray.");return{getLength:b,getItem:h,getItemMetadata:i,getItems:g,subscribe:l,onRowCountChanged:m,onRowsChanged:n}}}),define("text!scalejs.grid-slick/filters/filters.html",[],function(){return'<div id="number_filter_template">\r\n    <div data-bind="css: { iconArrowLeft: !flipped(), iconArrowRight: flipped }"></div> \r\n        <div class="numberFilter">\r\n            Select Value: \r\n               <div>Quick Search: <input data-bind="value: quickSearch, valueUpdate: \'afterkeydown\'" /></div> \r\n               <div class="listFilterBox">\r\n                   <div data-bind="visible: loading" style="width:100%;height:200px;background:black;opacity:.4;position:absolute"></div> \r\n                    <div>\r\n                        <input type="checkbox" data-bind="checked: all" /> \r\n                        <span>Select All</span> \r\n                    </div> \r\n                    <!-- ko foreach: options --> \r\n                    <div>\r\n                        <input type="checkbox" data-bind="checked: selected" /> \r\n                        <span data-bind="text: value"></span> \r\n                    </div> \r\n                    <!-- /ko --> \r\n               </div> \r\n               Show rows with values that: \r\n            <div class="numberFilterBox">\r\n                <div> \r\n                <input type="checkbox" data-bind="checked: notEmpty" />\r\n                <span>Are Not Empty</span> \r\n                </div>\r\n                <div>and</div> \r\n                <div>\r\n                    <select data-bind="value: comparisonA">\r\n                        <option value="EqualTo">Is Equal To</option> \r\n                        <option value="LessThan">Is Less Than</option> \r\n                        <option value="NotEqualTo">Is Not Equal To</option> \r\n                        <option value="GreaterThan">Is Greater Than</option>         \r\n                    </select>\r\n                </div> \r\n                <input type="text" data-bind="value: valueA, valueUpdate: \'afterkeydown\'" /> \r\n                <div>and</div> \r\n                <div>\r\n                    <select data-bind="value: comparisonB">\r\n                        <option value="EqualTo">Is Equal To</option> \r\n                        <option value="LessThan">Is Less Than</option>\r\n                        <option value="NotEqualTo">Is Not Equal To</option>\r\n                        <option value="GreaterThan">Is Greater Than</option> \r\n                    </select>\r\n                </div> \r\n                <input type="text" data-bind="value: valueB, valueUpdate: \'afterkeydown\'" /> \r\n            </div> \r\n    </div>  \r\n</div> \r\n \r\n<div id="string_filter_template">\r\n    <div data-bind="css: { iconArrowLeft: !flipped(), iconArrowRight: flipped }"></div> \r\n    <div class="numberFilter">\r\n        Select Value: \r\n        <div>Quick Search:  <input data-bind="value: quickSearch, valueUpdate: \'afterkeydown\'" /></div> \r\n        <div class="listFilterBox">\r\n            <div data-bind="visible: loading" style="width:100%;height:200px;background:black;opacity:.4;position:absolute"></div> \r\n            <div>\r\n                <input type="checkbox" data-bind="checked: all" /> \r\n                <span>Select All</span> \r\n            </div> \r\n            <!-- ko foreach: options --> \r\n            <div>\r\n                <input type="checkbox" data-bind="checked: selected" /> \r\n                <span data-bind="text: value"></span> \r\n            </div> \r\n            <!-- /ko --> \r\n        </div> \r\n        Show rows with values that: \r\n        <div class="numberFilterBox">\r\n            <div>\r\n                <input type="checkbox" data-bind="checked: notEmpty" />\r\n                <span>Are Not Empty</span> \r\n            </div>\r\n            <div>and</div> \r\n            <div>\r\n                <select data-bind="value: comparisonA">\r\n                    <option value="Contains">Contains</option> \r\n                    <option value="StartsWith">Starts With</option> \r\n                    <option value="EndsWith">Ends</option>  \r\n                </select>\r\n            </div> \r\n            <input type="text" data-bind="value: valueA, valueUpdate: \'afterkeydown\'" /> \r\n            <div>and</div> \r\n            <div>\r\n                <select data-bind="value: comparisonB">\r\n                    <option value="Contains">Contains</option> \r\n                    <option value="StartsWith">Starts With</option>\r\n                    <option value="EndsWith">Ends</option>\r\n                </select>\r\n            </div> \r\n            <input type="text" data-bind="value: valueB, valueUpdate: \'afterkeydown\'" />\r\n        </div> \r\n    </div>  \r\n</div>  \r\n\r\n'}),define("scalejs.grid-slick/filters/observableFilters",["scalejs!core","jQuery","knockout","text!./filters.html","bPopup","scalejs.statechart-scion","scalejs.mvvm"],function(a,b,c,d){function e(a,d){function e(a){X.quickSearch.dispose(),a&&a.values&&a.values.length?(U(a.values[0]),N(a.values[0])):(U(""),N("")),X.quickSearch=N.subscribe(r)}function r(b){X.fieldQuickSearch.dispose(),a.quickSearch(s(b)?{op:O,values:[b]}:void 0),X.fieldQuickSearch=a.quickSearch.subscribe(e)}function t(){X.filter.dispose();var b=a.value.peek()||[],c="string"===a.type?["Contains","StartsWith","EndsWith"]:["EqualTo","LessThan","NotEqualTo","GreaterThan"];-1===b.indexOf("NotEmpty")&&Q(!1),(void 0===b[0]||-1===c.indexOf(b[0].op))&&(P.a(c[0]),P.valA(void 0)),(void 0===b[1]||-1===c.indexOf(b[1].op))&&(P.b(c[0]),P.valB(void 0)),b.forEach(function(a,b){"In"===a.op?V().forEach(function(b){b.selected(a.values.indexOf(b.value)>-1)}):"NotEmpty"===a.op?Q(!0):0===b?(P.a(a.op),P.valA(a.values[0])):(P.b(a.op),P.valB(a.values[0]))}),M(b),X.filter=M.subscribe(u)}function u(b){X.fieldValue.dispose(),a.value(b),X.fieldValue=a.value.subscribe(t)}function v(a,b){return{selected:o(s(b)?b:R()),value:s(a)?a.toString():""}}function w(a){M(a||[])}function x(){R(!0),V().forEach(function(a){a.selected(!0)})}function y(){R(!1),V().forEach(function(a){a.selected(!1)})}function z(){return V().filter(function(a){return a.selected()})}function A(){P.valA(void 0),P.valB(void 0),Q(!1)}function B(a){J=b(a.find(".slick-filter")[0]),J.click(function(){function a(a){return W(a),a?J.offset().left-K.width()-d.width+10:J.offset().left+20}K||(K=b('<div class="slick-filter-popup" data-bind="template: { name: popupTemplate, data: $data}"></div>').appendTo("body"),c.applyBindings(I,K.get()[0]));var e=a(J.offset().left+10+K.width()>window.innerWidth),f=J.offset().top+K.height()>window.innerHeight?window.innerHeight-K.height():J.offset().top-10;L("filter.open"),K.bPopup({follow:[!1,!1],position:[e,f],opacity:0,speed:0,onClose:function(){L("filter.close")}});var g=K.find("div")[0];b(g).css("top",J.offset().top-f)})}function C(){return f(h("filter",k(function(){L=this.send,this.initial=!0}),g("filter.view",g("filter.hidden",k(function(b,c){X.quickSearchSub=N.subscribe(function(a){U(a)}),X.quickSub=U.subscribe(function(a){X.quickSearchSub.dispose(),N(a),X.quickSearchSub=N.subscribe(function(a){U(a)}),c("filter.model.all")||L("filter.all")}),this.initial&&(t(a.value()),e(a.quickSearch()),this.initial=!1)}),l(function(){X.quickSearchSub.dispose(),X.quickSub.dispose()}),i("filter.open",m("filter.shown"))),g("filter.shown",k(function(){S(!0);var a=T.subscribe(function(){S(!1),a.dispose()});N.valueHasMutated()}),i("filter.close",m("filter.hidden")))),g("filter.model",g("filter.model.all",k(function(){x(),A(),w(G()),X.list=F.subscribe(function(a){a?L("filter.list"):0===z().length&&L("filter.value")}),X.value=E.subscribe(function(){L("filter.value")})}),l(function(){X.list.dispose(),X.value.dispose()}),g("filter.all.hidden",k(function(){this.quickSubAll=U.subscribe(function(){w(G())})}),l(function(){this.quickSubAll.dispose()}),j("filter.shown",m("filter.all.shown"))),g("filter.all.shown",k(function(){U(N()),X.all=R.subscribe(function(a){a||L("filter.value")}),X.quick=N.subscribe(function(a){void 0!==a&&(U(N()),w(G()))})}),l(function(){X.all.dispose(),X.quick.dispose()}),j("filter.hidden",m("filter.all.hidden")))),g("filter.model.list",k(function(){R(!1),A(),w(F()),X.list=F.subscribe(function(a){a?w(a):L(0===z().length?"filter.value":"filter.all")}),X.value=E.subscribe(function(){L("filter.value")})}),l(function(){X.list.dispose(),X.value.dispose()}),g("filter.list.hidden",j("filter.shown",m("filter.list.shown"))),g("filter.list.shown",k(function(){U(""),X.all=R.subscribe(function(){L("filter.all")})}),l(function(){X.all.dispose()}),j("filter.hidden",m("filter.list.hidden")))),g("filter.model.value",k(function(){y(),U(""),w(E()),X.list=F.subscribe(function(a){a?L("filter.list"):z().length>0&&L("filter.all")}),X.value=E.subscribe(function(a){w(a)})}),l(function(){X.list.dispose(),X.value.dispose()}),g("filter.value.hidden",j("filter.shown",m("filter.value.shown"))),g("filter.value.shown",k(function(){X.all=R.subscribe(function(){L("filter.all")})}),l(function(){X.all.dispose()}),j("filter.hidden",m("filter.value.hidden")))),i("filter.all",n("filter.model.all")),i("filter.list",n("filter.model.list")),i("filter.value",n("filter.model.value")))))}function D(){Y.start()}var E,F,G,H,I,J,K,L,M=o([]),N=o(),O=a.quickFilterOp||"StartsWith",P={a:o(),valA:o(),b:o(),valB:o()},Q=o(!1),R=o(!0),S=o(!1),T=a.values,U=o(""),V=q([]),W=o(!1),X={};X.fieldQuickSearch=a.quickSearch.subscribe(e),X.quickSearch=N.subscribe(r),M.equalityComparer=function(a,b){return JSON.stringify(a)===JSON.stringify(b)},X.fieldValue=a.value.subscribe(t),X.filter=M.subscribe(u),T.subscribe(function(a){var b,c=1===M().length&&"In"===M()[0].op?M()[0].values:[];b=c.length>0?a.map(function(a){return v(a,c.indexOf(a.toString())>-1)}):a.groupJoin(V(),"$.toString()","$.value",function(a,b){return b.elementAtOrDefault(0,v(a))}).toArray(),V(b)}),E=p(function(){var a=[];return P.valA()&&a.push({op:P.a(),values:[P.valA()]}),P.valB()&&a.push({op:P.b(),values:[P.valB()]}),Q()&&a.push({op:"NotEmpty",values:[]}),a.length>0?a:void 0}),F=p(function(){var a=V().filter(function(a){return a.selected()});return a.length>0&&a.length<V().length?[{op:"In",values:a.map(function(a){return a.value})}]:void 0}),G=p(function(){return U()?[{op:O,values:[U()]}]:R()&&N()?[{op:O,values:[N()]}]:[]}),H=p(function(){return M().length>0}),I={comparisonA:P.a,comparisonB:P.b,valueA:P.valA,valueB:P.valB,quickSearch:N,all:R,options:V,popupTemplate:"string"===a.type?"string_filter_template":"number_filter_template",value:U,filterOn:H,flipped:W,notEmpty:Q,loading:S};var Y=C(),Z=!1;return{bindings:I,start:D,initalized:Z,init:B}}var f=a.state.builder.statechart,g=a.state.builder.state,h=a.state.builder.parallel,i=a.state.builder.on,j=a.state.builder.whenInStates,k=a.state.builder.onEntry,l=a.state.builder.onExit,m=a.state.builder["goto"],n=a.state.builder.gotoInternally,o=c.observable,p=c.computed,q=c.observableArray,r=(c.utils.unwrapObservable,a.mvvm.registerTemplates),s=a.object.has;return r(d),function(){function a(a){a.onHeaderRowCellRendered.subscribe(function(a,d){var f=b(d.node),g=f[0],h=d.column.filter,i='<input type="text" data-bind="value: value, valueUpdate: \'afterkeydown\'"/><div class="slick-filter" data-bind="css: { iconFilterOff: !filterOn(), iconFilterOn: filterOn }"></div>';h&&(h.state||(h.state=e(h,d.column)),f.html(i),c.applyBindings(h.state.bindings,g),h.state.init(f),h.state.initalized||(h.state.start(),h.state.initialized=!0))})}function d(){}return{init:a,destroy:d}}}),define("scalejs.grid-slick/filters/defaultFilters",["scalejs!core","knockout"],function(a,b){var c=b.observable,d=b.computed,e=a.object.has,f=a.object.valueOrDefault;return function(a,b){function g(a,b){var c;if(evaluate=k[a.op],"In"===a.op||"NotEmpty"===a.op)c=evaluate(b,a.values);else for(var d=0;d<a.values.length&&(c=evaluate(b,f(a.values[d],"").toString()),c);d+=1);return c}function h(a){return"string"==typeof a?a.toLowerCase():a}function i(a){return function(b){return e(b,a)?h(b[a]):-Number.MAX_VALUE}}var j,k={EqualTo:function(a,b){return parseFloat(a)===parseFloat(b)},GreaterThan:function(a,b){return parseFloat(a)>parseFloat(b)},LessThan:function(a,b){return parseFloat(a)<parseFloat(b)},NotEqualTo:function(a,b){return parseFloat(a)!==parseFloat(b)},In:function(a,b){return b.some(function(b){return a.match(new RegExp("^"+b+"$","i"))})},Contains:function(a,b){return a.match(new RegExp(b,"i"))},StartsWith:function(a,b){return a.match(new RegExp("^"+b,"i"))},EndsWith:function(a,b){return a.match(new RegExp(b+"$","i"))},NotEmpty:function(a){return""!==a}};return a.forEach(function(a){var d=c(""),h=a.filter.quickFilterOp;a.filter={type:a.filter.type,quickFilterOp:h,value:c(),quickSearch:d,values:c([])},d.subscribe(function(){var c=b().where(function(b){var c=!0;ops=operations.filter(function(b){return b.id!==a.id});for(var d=0;d<ops.length&&(c=g(ops[d],b[ops[d].id]),c);d++);return c}).distinct(function(b){return e(b[a.id])?b[a.id]:void 0}).orderBy(i(a.id)).select(function(b){return f(b[a.id],"").toString()});d().values[0]&&(s=d().values[0].toLowerCase(),c=c.where(function(a){return a=a.toLowerCase(),"Contains"===h?-1!==a.indexOf(s):0===a.indexOf(s)})),a.filter.values(c.take(50).toArray())})}),j=d(function(){if(operations=a.selectMany(function(a){return a.filter.value()},function(a,b){return{id:a.id,op:b.op,values:b.values}}).toArray(),operations.length>0){var c=b().filter(function(a){for(var b,c=0;c<operations.length&&(b=g(operations[c],a[operations[c].id]),b);c++);return b});return c}return b()})}}),define("scalejs.grid-slick/sorting/observableSorting",["scalejs!core","knockout"],function(a,b){"use strict;";return function(a){function c(c){c.onSort.subscribe(function(b,c){var d=c.multiColumnSort?c.sortCols:[c];d=d.reduce(function(a,b){return a[b.sortCol.field]=b.sortAsc,a},{}),a(d)}),b.computed(function(){if(void 0!==a()){var b=Object.keys(a()).map(function(b){return{columnId:b,sortAsc:a()[b]}});c.setSortColumns(b)}})}function d(){}return{init:c,destroy:d}}}),define("scalejs.grid-slick/sorting/defaultSorting",["scalejs!core","knockout"],function(a,b){{var c=a.object.has;b.computed}return function(a,d,e){function f(a){return"string"==typeof a?a.toLowerCase():a}function g(a){return function(b){return c(b,a)?f(b[a]):-Number.MAX_VALUE}}function h(a,b){function c(a,b){return b.sortAsc?a.thenBy(g(b.column)):a.thenByDescending(g(b.column))}function d(a,b){return b.sortAsc?a.orderBy(g(b.column)):a.orderByDescending(g(b.column))}var e;return b&&0!==b.length?(e=d(a,b[0]),e=b.skip(1).aggregate(e,c),a=e.toArray()):a}var i;return i=b.computed(function(){if(void 0===a())return e();var b=Object.keys(a()).map(function(b){return{column:b,sortAsc:a()[b]}});return orderedItems=h(e(),b),orderedItems})}}),define("scalejs.grid-slick/changesFlasher",["scalejs!core"],function(a){return function(b,c){function d(a){if("string"==typeof c.key)return a[c.key];var b=c.key.map(function(b){return a[b]}).join("_");return b}function e(){var a,c;for(c=0;c<b.getDataLength();c+=1)a=b.getDataItem(c),g(a)&&(j[d(a)]=a)}var f=a.object.clone,g=a.object.has,h=a.object.diff,i=a.object.merge,j={};c=i({speed:1e3,key:"id"},c),c.fields=g(c.fields)?c.fields:b.getColumns().map(function(a){return a.field}),b.getData().onRowsChanged.subscribe(function(a,i){var k=i.rows,l=(new Date).getTime().toString(),m="flash_chaged_"+l,n="flash_changes_"+l,o=f(g(b.getCellCssStyles(m))||{}),p=f(g(b.getCellCssStyles(n))||{});k.forEach(function(a){var e,f,i,k,l;e=b.getDataItem(a),g(e)&&(f=j[d(e)],g(f)&&g(f)&&f!==e&&(i=h(f,e,c.fields),k={},l={},Object.keys(i).forEach(function(a){var b=i[a][0],c=i[a][1];c>b&&(l[a]="slick-cell-changed-up",k[a]="slick-cell-changed"),b>c&&(l[a]="slick-cell-changed-down",k[a]="slick-cell-changed")}),o[a]=k,p[a]=l))}),b.setCellCssStyles(m,o),b.setCellCssStyles(n,p),e(),setTimeout(function(){b.removeCellCssStyles(n)},100),setTimeout(function(){b.removeCellCssStyles(m)},c.speed)})}}),define("scalejs.grid-slick/slickGrid",["scalejs!core","require","knockout","jQuery","slick.grid","./observableDataview","./filters/observableFilters","./filters/defaultFilters","./sorting/observableSorting","./sorting/defaultSorting","./changesFlasher"],function(a,b,c,d,e,f,g,h,i,j,k){function l(b,l){function m(a){var b,c=D.filter(function(a){return a.filter});return 0===c.length?a:(b=c.some(function(a){return!a.filter.value})?h(c,a):a,E.push(g()),b)}function r(a){var b,c=l.sorting,d=D.filter(function(a){return a.sortable});return void 0===c?a:(l.customSort?b=a:(c=n(l.sorting)?l.sorting:q(),b=j(c,d,a)),E.push(i(c)),b)}function s(a){var b;return b=l.itemsCount?a:c.computed(function(){return a().map(function(a,b){return a.index=b,a})})}function t(){A=l.itemsSource,A=r(A),A=m(A),A=s(A)}function u(){B=f(p(l,{itemsSource:A})),B.onRowCountChanged.subscribe(function(){C.updateRowCount(),C.render()}),B.onRowsChanged.subscribe(function(a,b){var c,d;c=C.getRenderedRange(),d=b.rows.filter(function(a){return a>=c.top&&a<=c.bottom}),d.length>0&&(C.invalidateRows(d),C.render())})}function v(){l.explicitInitialization=!0,C=new e.Grid(b,B,D,l),d(b).data("slickgrid",C),C.setSelectionModel(new e.RowSelectionModel),E.forEach(function(a){a.init(C)}),n(l.columns)&&l.columns.subscribe(function(){D=c.unwrap(l.columns),C.setColumns(D)}),l.changesFlasher&&k(C,l.changesFlasher),C.init()}function w(){B.subscribe()}function x(){o(l.selectedItem)?C.getSelectionModel().onSelectedRangesChanged.subscribe(function(){var a=[];C.getSelectedRows().forEach(function(b){a.push(C.getDataItem(b))}),l.selectedItem(a)}):n(l.selectedItem)&&C.getSelectionModel().onSelectedRangesChanged.subscribe(function(){var a,b;a=C.getSelectedRows(),b=C.getDataItem(a[0]),l.selectedItem(b)})}function y(){var a;n(l.viewport)&&(C.onViewportChanged.subscribe(function(){var a=C.getViewport();l.viewport(a)}),l.viewport.subscribe(function(b){(b.top>a+2||b.top<a-2)&&(C.scrollRowIntoView(b.top),a=b.top)}))}function z(){a.layout&&a.layout.onLayoutDone&&a.layout.onLayoutDone(function(){if(C.resizeCanvas(),n(l.viewport)){var a=C.getViewport();l.viewport(a)}})}var A,B,C,D=c.unwrap(l.columns),E=[];t(),u(),v(),w(),x(),y(),z()}function m(a,b,c){var d=c(),e=d.slickGrid;return l(a,e),{controlsDescendantBindings:!0}}{var n=c.isObservable,o=function(a){return n(a)&&a.indexOf},p=a.object.merge,q=(a.object.has,a.linq.enumerable.from,c.observable);c.observableArray,c.computed,a.object.valueOrDefault}return{init:m}}),define("scalejs.grid-slick",["./scalejs.grid-slick/slickGrid","knockout","scalejs.linq-linqjs"],function(a,b){b.bindingHandlers.slickGrid=a});